webpackJsonp([8],{"9LO+":function(e,t,o){"use strict";const n={control:{unload:"removeControl"},layer:{unload:"removeTileLayer"},overlay:{unload:"removeOverlay"},contextMenu:{unload:"removeContextMenu"}},a=e=>e.abstract||e.$el===e.$children[0].$el?a(e.$parent):e;function s(){const{unload:e,renderByParent:t,$parent:o}=this;t&&o.reload(),e()}t.a=(e=>new class{constructor(e){this.methods={ready(){const e=a(this.$parent),t=this.BMap=e.BMap,o=this.map=e.map;this.load(),this.$emit("ready",{BMap:t,map:o})},transmitEvent(e){this.$emit(e.type.replace(/^on/,""),e)},reload(){this&&this.BMap&&this.$nextTick(()=>{this.unload(),this.$nextTick(this.load)})},unload(){const{map:t,originInstance:o}=this;try{switch(e.type){case"search":return o.clearResults();case"autoComplete":case"lushu":return o.dispose();case"markerClusterer":return o.clearMarkers();default:t[n[e.type].unload](o)}}catch(e){}}},this.computed={renderByParent(){return this.$parent.preventChildrenRender}},this.mounted=function(){const e=a(this.$parent),t=e.map,{ready:o}=this;t?o():e.$on("ready",o)},this.destroyed=s,this.beforeDestroy=s}}({type:e}))},Brla:function(e,t,o){"use strict";function n(e,t={}){const{lng:o,lat:n}=t;return new e.Point(o,n)}function a(e,t={}){const{width:o,height:n}=t;return new e.Size(o,n)}t.b=n,t.c=a,t.a=function(e,t={}){const{url:o,size:n,opts:s={}}=t;return new e.Icon(o,a(e,n),{anchor:s.anchor&&a(e,s.anchor),imageSize:s.imageSize&&a(e,s.imageSize),imageOffset:s.imageOffset&&a(e,s.imageOffset),infoWindowAnchor:s.infoWindowAnchor&&a(e,s.infoWindowAnchor),printImageUrl:s.printImageUrl})}},HPcy:function(e,t,o){"use strict";(function(e){var n=o("9LO+"),a=o("HpPs"),s=o("Brla");t.a={name:"bm-geolocation",render:function(){},mixins:[Object(n.a)("control")],props:{anchor:{type:String},offset:{type:Object},showAddressBar:{type:Boolean},autoLocation:{type:Boolean},locationIcon:{type:Object}},watch:{anchor:function(){this.reload()},offset:function(){this.reload()},showAddressBar:function(){this.reload()},autoLocation:function(){this.reload()},locationIcon:function(){this.reload()}},methods:{load:function(){var t=this.BMap,o=this.map,n=this.anchor,i=this.showAddressBar,r=this.autoLocation,c=this.locationIcon,l=this.offset;this.originInstance=new t.GeolocationControl({anchor:e[n],showAddressBar:i,enableAutoLocation:r,offset:l&&Object(s.c)(t,l),locationIcon:c&&Object(s.a)(t,c)}),a.a.call(this,this.originInstance),o.addControl(this.originInstance)}}}}).call(t,o("DuR2"))},HpPs:function(e,t,o){"use strict";var n={"baidu-map":["click","dblclick","rightclick","rightdblclick","maptypechange","mousemove","mouseover","mouseout","movestart","moving","moveend","zoomstart","zoomend","addoverlay","addcontrol","removecontrol","removeoverlay","clearoverlays","dragstart","dragging","dragend","addtilelayer","removetilelayer","load","resize","hotspotclick","hotspotover","hotspotout","tilesloaded","touchstart","touchmove","touchend","longpress"],"bm-geolocation":["locationSuccess","locationError"],"bm-overview-map":["viewchanged","viewchanging"],"bm-marker":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","infowindowclose","infowindowopen","dragstart","dragging","dragend","rightclick"],"bm-polyline":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-polygon":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-circle":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-label":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","rightclick"],"bm-info-window":["close","open","maximize","restore","clickclose"],"bm-ground":["click","dblclick"],"bm-auto-complete":["onconfirm","onhighlight"],"bm-point-collection":["click","mouseover","mouseout"]};o("Brla");t.a=function(e,t){const o=t||n[(e=>e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`).replace(/^-/,""))(this.$options._componentTag)];o&&o.forEach(t=>{const o="on"===t.slice(0,2)?t.slice(2):t,n=this.$listeners[o];n&&e.addEventListener(t,n.fns)})}},OpxV:function(e,t,o){"use strict";var n=o("HPcy"),a=o("VU/8")(n.a,null,!1,null,null,null);t.a=a.exports},WMML:function(e,t){},yy3O:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("tlGt"),a=o("Au9i"),s=o("mw3O"),i=o.n(s),r={name:"Myprofile",data:function(){return{showmap:!1,myInfo:{},center:{lng:null,lat:null},zoom:15}},created:function(){var e=this;Object(n.Q)({fUserId:localStorage.getItem("userId")}).then(function(t){e.myInfo=t.data}),this.userHead=this.myInfo.userPhoto},methods:{back:function(){this.$router.go(-1)},save:function(){var e=this;Object(n.o)(i.a.stringify({userId:this.myInfo.userId,photo:localStorage.getItem("userHeadPic"),nickName:this.myInfo.nickName,signature:this.myInfo.userSignature,introduce:this.myInfo.introduce,address:this.myInfo.addRess,longitude:this.center.lng,latitude:this.center.lat})).then(function(t){"0"===t.status&&(e.myInfo.userPhoto=t.data,Object(a.Toast)({message:"更改成功",duration:1500}),e.$router.go(-1))})},changeHead:function(){this.$refs.headImg.click()},confirm:function(){var e=this;if(0!==this.$refs.headImg.files.length){var t=new FormData;t.append("file",this.$refs.headImg.files[0]),t.append("scene","user");Object(n._4)(t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log(t),e.myInfo.userPhoto=t.data.fullFile,localStorage.setItem("userHeadPic",t.data.relaFile)})}},handler:function(e){var t=this,o=e.BMap,n=(e.map,this);(new o.Geolocation).getCurrentPosition(function(e){var o=e.address.city+e.address.district+e.address.street+e.address.street_number;console.log(o),t.myInfo.addRess=o,n.center={lng:e.longitude,lat:e.latitude},t.center=n.center,console.log(t.center)})},getLocationSuccess:function(){console.log("succsess")},getLocationError:function(){console.log("error")},showMap:function(){this.showmap=!0}},components:{BmGeolocation:o("OpxV").a}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"myProfile"},[n("div",{staticClass:"header"},[n("span",{staticClass:"back",on:{click:e.back}},[n("img",{staticClass:"releaseIcon",attrs:{src:o("0YUB")}})]),e._v(" "),n("span",{staticClass:"usersTitle"},[e._v("个人资料")]),e._v(" "),n("span",{staticClass:"back"}),e._v(" "),n("span",{staticClass:"keep",on:{click:e.save}},[e._v("保存")])]),e._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"headPic"},[n("img",{attrs:{src:e.myInfo.userPhoto}})]),e._v(" "),n("label",{staticClass:"changeImg",on:{click:e.changeHead}},[e._v("修改头像")]),e._v(" "),n("input",{ref:"headImg",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.confirm}})]),e._v(" "),n("div",{staticClass:"profiles"},[n("div",{staticClass:"row"},[n("label",{attrs:{for:"fName"}},[e._v("昵称")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.myInfo.nickName,expression:"myInfo.nickName"}],staticClass:"profileText",attrs:{name:"fName",type:"text",maxlength:"15"},domProps:{value:e.myInfo.nickName},on:{input:function(t){t.target.composing||e.$set(e.myInfo,"nickName",t.target.value)}}}),e._v(" "),n("span",{staticClass:"detail fName"},[e._v("2-15个字符，可包含中英文、数字、符号")])]),e._v(" "),n("div",{staticClass:"row"},[n("label",{attrs:{for:"sign"}},[e._v("个性签名")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.myInfo.userSignature,expression:"myInfo.userSignature"}],staticClass:"profileText",attrs:{name:"sign",placeholder:"您还没有设置个人签名！",type:"text",maxlength:"15"},domProps:{value:e.myInfo.userSignature},on:{input:function(t){t.target.composing||e.$set(e.myInfo,"userSignature",t.target.value)}}}),e._v(" "),n("span",{staticClass:"detail sign"},[e._v("最多输入15字符，可包含中英文、数字、符号")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"C"!==e.myInfo.userType,expression:"myInfo.userType !== 'C'"}],staticClass:"row"},[n("label",{attrs:{for:"sign"}},[e._v("基本介绍")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.myInfo.introduce,expression:"myInfo.introduce"}],staticClass:"profileText",attrs:{name:"sign",placeholder:"向大家简单介绍下自己吧！",type:"text"},domProps:{value:e.myInfo.introduce},on:{input:function(t){t.target.composing||e.$set(e.myInfo,"introduce",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"row"},[n("label",{attrs:{for:"sign"}},[e._v("详细地址")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.myInfo.addRess,expression:"myInfo.addRess"}],staticClass:"profileText",attrs:{name:"sign",placeholder:"您还没有设置您的常用地址！",type:"text"},domProps:{value:e.myInfo.addRess},on:{click:e.showMap,input:function(t){t.target.composing||e.$set(e.myInfo,"addRess",t.target.value)}}})]),e._v(" "),e.showmap?n("baidu-map",{staticClass:"bm-view",attrs:{center:e.center,zoom:e.zoom},on:{ready:e.handler}},[n("bm-geolocation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",showAddressBar:!0,autoLocation:!0},on:{locationSuccess:e.getLocationSuccess,locationError:e.getLocationError}})],1):e._e(),e._v(" "),n("div",{staticClass:"row"},[n("label",{attrs:{for:"sign"}},[e._v("您的邀请码")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.myInfo.invitationCode,expression:"myInfo.invitationCode"}],staticClass:"profileText",attrs:{name:"sign",type:"text",disabled:""},domProps:{value:e.myInfo.invitationCode},on:{input:function(t){t.target.composing||e.$set(e.myInfo,"invitationCode",t.target.value)}}})])],1)])},staticRenderFns:[]};var l=o("VU/8")(r,c,!1,function(e){o("WMML")},"data-v-89d357e2",null);t.default=l.exports}});
//# sourceMappingURL=8.506821ff1064f8c6a6be.js.map