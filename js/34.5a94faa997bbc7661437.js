webpackJsonp([34],{"2QDw":function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("dDoS"),n=t.n(i),a=t("tlGt"),o=t("YtJ0"),l=t("Au9i"),c={name:"userInfor",data:function(){return{showLesson:"thisWeek",topHeight:"",userInfo:{},active:"tabContainer1",hasMask:!1,isShow:!1,menuLinks:[{link:"课程目录",isActive:!0,tab:"tabContainer1"},{link:"教学视频",isActive:!1,tab:"tabContainer3"}],lessons:[],actions:[{link:"收藏"},{link:"分享"},{link:"举报"}],videoList:[],freeVideos:[],paidVideos:[],normal:"normal",personal:"personal",showLessonDetails:!1,hasmask:!1,month:(new Date).getMonth()+1,days:["周一","周二","周三","周四","周五","周六","周日"],dateNum:[],thisWeek:[],nextWeek:[],times:["06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00"],lessonThisWeek:[],lessonNextWeek:[]}},directives:{ClickOutside:n.a},mounted:function(){function s(s){var e=new Date,t=new Date(e-864e5*(e.getDay()-1));return t.setDate(t.getDate()+s),Number(t.getMonth()+1)+"-"+t.getDate()}for(var e=0;e<7;e++)this.thisWeek.push(s(e));this.dateNum=this.thisWeek;for(var t=7;t<14;t++)this.nextWeek.push(s(t));this.fUserID=localStorage.getItem("fUserID"),this.fInstructorId=localStorage.getItem("fInstructorId"),this.getUserInfo(),this.getLessons(),this.getVideoList(),window.scrollTo(100,0)},watch:{active:function(){for(var s=0;s<this.menuLinks.length;s++)this.menuLinks[s].isActive=!1,this.active===this.menuLinks[s].tab&&(this.menuLinks[s].isActive=!0)}},methods:{back:function(){this.$router.go(-1)},getUserInfo:function(){var s=this;Object(a.L)({fInstructorId:this.fInstructorId}).then(function(e){s.userInfo=e.data,setTimeout(function(){s.topHeight=10*s.$refs.test.getBoundingClientRect().bottom/window.screen.width+"rem"},0)})},getLessons:function(){var s=this;Object(a.M)({fInstructorId:localStorage.getItem("fUserId")}).then(function(e){console.log(e),s.lessonThisWeek=e.data.beginTimeLesson,s.lessonNextWeek=e.data.nextMondayLesson})},getLessonHeight:function(s){var e=parseInt(s.lessonEndDateTime.split(":")[0])-parseInt(s.lessonBeginDateTime.split(":")[0]),t=parseInt(s.lessonEndDateTime.split(":")[1])-parseInt(s.lessonBeginDateTime.split(":")[1]);return 1.36*(2*e+(30===t?1:-30===t?-1:0))+"rem"},getLessonTop:function(s){return 1.36*(2*(parseInt(s.lessonBeginDateTime.split(":")[0])-6)+(30===parseInt(s.lessonBeginDateTime.split(":")[1])?1:0)+1)+"rem"},getLessonLeft:function(s){var e=new Date(s.lessonBeginDate).getDay();return 1===e?1*e+.53+"rem":0===e?1.0133*(e=7)+.4+"rem":1.0133*e+.42+"rem"},showLessonInfo:function(s,e){document.addEventListener("touchmove",this.bodyscroll,!1),document.body.parentNode.style.overflow="hidden",this.hasmask=!0,this.showLessonDetails=!0,this.lessonDetails=s[e]},hideDetails:function(){this.showLessonDetails=!1,this.hasmask=!1,document.removeEventListener("touchmove",this.bodyscroll,!1),document.body.parentNode.style.overflow="auto"},getVideoList:function(){var s=this;Object(a.O)({fInstructorId:localStorage.getItem("fInstructorId")}).then(function(e){console.log(e.data),s.videoList=e.data;for(var t=0;t<s.videoList.length;t++)"0"===s.videoList[t].fIsOpen?s.freeVideos.push(s.videoList[t]):s.paidVideos.push(s.videoList[t]);return console.log(s.paidVideos),s.freeVideos&s.paidVideos})},toggleTab:function(s){window.scrollTo(100,0);for(var e=0;e<this.menuLinks.length;e++)this.menuLinks[e].isActive=!1,this.menuLinks[s].isActive=!0,this.active=this.menuLinks[s].tab},toggleMore:function(){this.isShow=!this.isShow,this.hasMask=!this.hasMask},showDetails:function(s){localStorage.setItem("fLessonId",this.lessons[s].fLessonId),this.$router.push("/home/teachers/lessonInfor")},playVideo:function(s,e){var t=this;"0"===s[e].fIsOpen?(o.a.commit("getVideoInfo",s[e]),this.$router.push("/home/mine/videoPlayer")):Object(a.g)({videoId:s[e].fVideoId}).then(function(i){console.log(i),"-1"===i.status?l.MessageBox.confirm("",{message:"确认付费观看?"}).then(function(i){"confirm"===i&&Object(a.W)({videoId:s[e].fVideoId}).then(function(i){console.log(i),"0"===i.status?(Object(l.Toast)({message:"购买视频成功",duration:1500}),o.a.commit("getVideoInfo",s[e]),t.$router.push("/home/mine/videoPlayer")):Object(l.Toast)({message:"购买视频失败,请稍后再试",duration:1500})})}).catch(function(s){"cancel"===s&&Object(l.Toast)({message:"已取消",duration:1500})}):(o.a.commit("getVideoInfo",s[e]),t.$router.push("/home/mine/videoPlayer"))})},appiontment:function(){var s=this;Object(a.d)({lessonId:this.lessonDetails.lessonId}).then(function(e){console.log(e),"0"===e.status?(o.a.commit("saveLessonId",s.lessonDetails.lessonId),s.$router.push("/home/teachers/lessonInfor")):(s.hasmask=!1,s.showLessonDetails=!1,Object(l.Toast)({message:"该课程已预约",duration:1500}))})},nextweek:function(){this.dateNum=this.nextWeek;for(var s=0;s<this.$refs.dates.length;s++)this.$refs.dates[s].classList.contains("selected")&&this.$refs.dates[s].classList.remove("selected");this.showLesson="nextWeek"},previousWeek:function(){this.dateNum=this.thisWeek;for(var s=0;s<this.$refs.dates.length;s++)this.$refs.dates[s].classList.contains("selected")&&this.$refs.dates[s].classList.remove("selected");this.showLesson="thisWeek"},showAll:function(){this.$refs.introduce.classList.contains("showDetail")?(this.$refs.introduce.classList.remove("showDetail"),this.topHeight=10*this.$refs.test.getBoundingClientRect().bottom/window.screen.width+"rem"):(this.$refs.introduce.classList.add("showDetail"),this.topHeight=10*this.$refs.test.getBoundingClientRect().bottom/window.screen.width+"rem")},toggleConcern:function(){console.log("concern")}}},r={render:function(){var s=this,e=s.$createElement,i=s._self._c||e;return s.userInfo!={}?i("div",{staticClass:"userInfor"},[i("div",{ref:"test",staticClass:"fixedArea",attrs:{id:"test"}},[i("div",{staticClass:"header"},[i("span",{staticClass:"back",on:{click:s.back}},[i("img",{staticClass:"releaseIcon",attrs:{src:t("0YUB")}})]),s._v(" "),i("span",{staticClass:"more",on:{click:s.toggleMore}},[i("img",{attrs:{src:t("rziK")}}),s._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:s.isShow,expression:"isShow"}],staticClass:"moreMenu",attrs:{id:"moreMenu"}},s._l(s.actions,function(e,t){return i("li",{key:t},[s._v(s._s(e.link))])}))])]),s._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"information"},[i("div",{staticClass:"inforLeft"},[i("span",{staticClass:"headPic"},[i("img",{attrs:{src:s.userInfo.fPhoto}}),s._v(" "),i("div",{staticClass:"usertype"},[s._v(s._s("T"===s.userInfo.fUserType?"教":"C"===s.userInfo.fUserType?"馆":"学"))])])]),s._v(" "),i("div",{staticClass:"inforRight"},[i("span",{staticClass:"details"},[i("span",{staticClass:"userName"},[s._v(s._s(s.userInfo.fName))]),s._v(" "),i("span",{staticClass:"userBelong"},[i("span",[s._v("所在位置：")]),s._v(s._s(s.userInfo.fAddress))]),s._v(" "),i("div",{ref:"introduce",staticClass:"userDetail showDetail",on:{click:s.showAll}},[s._v("个人简介："+s._s(s.userInfo.fIntroduce))])])]),s._v(" "),i("button",{staticClass:"concern",on:{click:s.toggleConcern}},[i("img",{attrs:{src:t("M9DV")}}),s._v(" "),i("span",[s._v("关注")])])])]),s._v(" "),i("ul",{staticClass:"menuTab"},s._l(s.menuLinks,function(e,t){return i("li",{key:t,staticClass:"menuLink",class:{active:e.isActive},on:{click:function(e){s.toggleTab(t)}}},[s._v(s._s(e.link))])}))]),s._v(" "),i("div",{staticClass:"container",style:{marginTop:s.topHeight}},[i("mt-tab-container",{model:{value:s.active,callback:function(e){s.active=e},expression:"active"}},[i("mt-tab-container-item",{staticClass:"touchHeight",attrs:{id:"tabContainer1"}},[i("div",{staticClass:"dateSection"},[i("ul",{staticClass:"week"},s._l(s.days,function(e,t){return i("li",{key:t},[s._v(s._s(e))])})),s._v(" "),i("ul",{staticClass:"date"},[s._l(s.dateNum,function(e,t){return i("li",{key:t,ref:"dates",refInFor:!0},[s._v(s._s(e.split("-")[1]))])}),s._v(" "),i("span",{staticClass:"previous",on:{click:s.previousWeek}},[i("img",{attrs:{src:t("ky0h")}})]),s._v(" "),i("span",{staticClass:"next",on:{click:s.nextweek}},[i("img",{attrs:{src:t("ky0h")}})])],2),s._v(" "),i("div",{staticClass:"month"},[i("span",[s._v(s._s(s.month))]),s._v(" "),i("span",[s._v("月")])])]),s._v(" "),i("div",{staticClass:"lessonForm"},[i("ul",{staticClass:"timeArea"},s._l(s.times,function(e,t){return i("li",{key:t,staticClass:"times"},[i("span",{staticClass:"time"},[s._v(s._s(e))]),s._v(" "),i("span",{staticClass:"grids"},[i("span",{staticClass:"grid"}),s._v(" "),i("span",{staticClass:"grid"}),s._v(" "),i("span",{staticClass:"grid"}),s._v(" "),i("span",{staticClass:"grid"}),s._v(" "),i("span",{staticClass:"grid"}),s._v(" "),i("span",{staticClass:"grid"}),s._v(" "),i("span",{staticClass:"grid"})])])})),s._v(" "),"thisWeek"===s.showLesson?i("ul",{staticClass:"lessons"},s._l(s.lessonThisWeek,function(e,t){return i("li",{key:t,staticClass:"lesson",class:["0"===e.lessonType?s.normal:s.personal,{full:e.fOrderCnt===e.fLimitCnt}],style:{height:s.getLessonHeight(e),top:s.getLessonTop(e),left:s.getLessonLeft(e)},on:{click:function(e){s.showLessonInfo(s.lessonThisWeek,t)}}},[s._v(s._s("0"===e.lessonType?"普课":"私教"))])})):s._e(),s._v(" "),"nextWeek"===s.showLesson?i("ul",{staticClass:"lessons"},s._l(s.lessonNextWeek,function(e,t){return i("li",{key:t,staticClass:"lesson",class:["0"===e.lessonType?s.normal:s.personal,{full:e.fOrderCnt===e.fLimitCnt}],style:{height:s.getLessonHeight(e),top:s.getLessonTop(e),left:s.getLessonLeft(e)},on:{click:function(e){s.showLessonInfo(s.lessonNextWeek,t)}}},[s._v(s._s("0"===e.lessonType?"普课":"私教"))])})):s._e(),s._v(" "),s.showLessonDetails?i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:s.hideDetails,expression:"hideDetails"}],staticClass:"lessonDetails"},[i("div",{staticClass:"content"},[i("div",{staticClass:"lessonInfo"},[i("div",{staticClass:"infor"},[i("div",{staticClass:"lessonLeft"},[i("span",[s._v(s._s(new Date(s.lessonDetails.lessonBeginDate).getMonth()+1)+"月"+s._s(new Date(s.lessonDetails.lessonBeginDate).getDate())+"日")])]),s._v(" "),i("div",{staticClass:"lessonRight"},[i("ul",{staticClass:"lessonDetail"},["0"===s.lessonDetails.lessonType?i("li",[s._v("课程名称："+s._s(s.lessonDetails.lessonName))]):s._e(),s._v(" "),"0"===s.lessonDetails.lessonType?i("li",[s._v("课程介绍："+s._s(s.lessonDetails.lessonNote))]):s._e(),s._v(" "),i("li",[s._v("价格："+s._s("0"===s.lessonDetails.lessonType?"￥ "+s.lessonDetails.lessonPrice+" 元":s.lessonDetails.lessonPrice+" 元/ 0.5小时"))]),s._v(" "),i("li",[s._v("时间："+s._s(s.lessonDetails.lessonBeginDateTime)+"-"+s._s(s.lessonDetails.lessonEndDateTime))]),s._v(" "),"0"===s.lessonDetails.lessonType?i("li",[s._v("地址："+s._s(s.lessonDetails.lessonAddress))]):s._e()])])]),s._v(" "),i("div",{staticClass:"accountNum"},["0"===s.lessonDetails.lessonType?i("span",[i("span",{staticClass:"number"},[s._v("报名人数")]),s._v(" "),i("span",{staticClass:"textOrange"},[s._v(s._s(s.lessonDetails.fOrderCnt)+"/"+s._s(s.lessonDetails.fLimitCnt))])]):s._e(),s._v(" "),"1"===s.lessonDetails.lessonType?i("span",{staticClass:"textOrange"},[s._v("\n                        "+s._s("0"===s.lessonDetails.fOrderCnt?"未预约":"已预约")+"\n                      ")]):s._e()]),s._v(" "),i("div",{staticClass:"delete"},[i("button",{staticClass:"deleteLesson",on:{click:s.appiontment}},[s._v("预约")])])])])]):s._e()])]),s._v(" "),i("mt-tab-container-item",{staticClass:"touchHeight",attrs:{id:"tabContainer2"}},[i("mt-cell",[i("div",{staticClass:"cards"},[i("div",{staticClass:"tip"},[s._v("该内容暂未上线")])])])],1),s._v(" "),i("mt-tab-container-item",{staticClass:"touchHeight",attrs:{id:"tabContainer3"}},[i("mt-cell",[i("div",{staticClass:"allVideos"},[i("div",{staticClass:"freeVideo"},[i("div",{staticClass:"videoTitle"},[i("span",{staticClass:"videoType"},[s._v("免费视频")]),s._v(" "),i("button",{staticClass:"showMore"},[s._v("查看更多")])]),s._v(" "),i("div",{staticClass:"videos"},[s._l(s.freeVideos,function(e,t){return i("div",{key:t,staticClass:"video"},[i("div",{staticClass:"videoCover",on:{click:function(e){s.playVideo(s.freeVideos,t)}}},[i("img",{attrs:{src:e.fVideoCoverImgUrl}})]),s._v(" "),i("div",{staticClass:"videoDetails"},[i("span",{staticClass:"videoName"},[s._v(s._s(e.fVideoName))]),s._v(" "),i("br"),s._v(" "),i("span",{staticClass:"videoDiscription"},[s._v(s._s(e.fVideoNote))])])])}),s._v(" "),i("div",{staticClass:"clearFix"})],2)]),s._v(" "),i("div",{staticClass:"paidVideo"},[i("div",{staticClass:"videoTitle"},[i("span",{staticClass:"videoType"},[s._v("付费视频")]),s._v(" "),i("button",{staticClass:"showMore"},[s._v("查看更多")])]),s._v(" "),i("div",{staticClass:"videos"},[s._l(s.paidVideos,function(e,t){return i("div",{key:t,staticClass:"video"},[i("div",{staticClass:"videoCover",on:{click:function(e){s.playVideo(s.paidVideos,t)}}},[i("img",{attrs:{src:e.fVideoCoverImgUrl}})]),s._v(" "),i("div",{staticClass:"videoDetails"},[i("span",{staticClass:"videoName"},[s._v(s._s(e.fVideoName))]),s._v(" "),i("br"),s._v(" "),i("span",{staticClass:"videoDiscription"},[s._v(s._s(e.fVideoNote))]),s._v(" "),i("div",{staticClass:"symbol"},[s._v(s._s(e.fVideoPrice)+"元")])])])}),s._v(" "),i("div",{staticClass:"clearFix"})],2)])])])],1)],1)],1),s._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:s.hasMask,expression:"hasMask"}],staticClass:"mask",on:{click:s.toggleMore}}),s._v(" "),s.hasmask?i("div",{staticClass:"mask1"}):s._e()]):s._e()},staticRenderFns:[]};var d=t("VU/8")(c,r,!1,function(s){t("r65B")},"data-v-78191371",null);e.default=d.exports},r65B:function(s,e){}});
//# sourceMappingURL=34.5a94faa997bbc7661437.js.map