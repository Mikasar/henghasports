webpackJsonp([33],{iUA2:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("tlGt"),s=t("Au9i"),o={name:"uploadVideo",data:function(){return{hasCover:!1,videoCover:"",videoTitle:"",videoContent:"",paid:"0",videoPrice:""}},methods:{back:function(){this.$router.go(-1)},getCover:function(){var e=this;if(0!==this.$refs.myVideo.files.length){var a=new FormData;a.append("file",this.$refs.myVideo.files[0]),a.append("scene","releaseVideoCoach");s.Indicator.open({text:"视频添加中",spinnerType:"snake"}),Object(i.v)(a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){console.log(a.data.fullFile),e.videoCover=a.data.fullFile,localStorage.setItem("videoCover",a.data.relaFile),e.hasCover=!0,s.Indicator.close(),Object(s.Toast)({message:"添加成功",duration:1500})})}},release:function(){var e=this;if(0!==this.$refs.myVideo){if(/^[0-9]+([.]{1}[0-9]{1,2})?$/.test(this.videoPrice)||""===this.videoPrice){var a=new FormData;s.Indicator.open({text:"视频上传中",spinnerType:"snake"}),a.append("relaFile",localStorage.getItem("videoCover")),a.append("videoName",this.videoTitle),a.append("videoNote",this.videoContent),a.append("open",this.paid),a.append("videoPrice",this.videoPrice);Object(i._7)(a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){console.log(a),"0"===a.status?(s.Indicator.close(),Object(s.Toast)({message:"视频上传成功",duration:1500}),e.$router.go(-1)):Object(s.Toast)({message:"视频上传失败",duration:1500})})}else Object(s.Toast)({message:"视频金额格式不正确",duration:1500})}else Object(s.Toast)({message:"请先添加视频",duration:1500})},selectVideo:function(){this.$refs.myVideo.click()}}},n={render:function(){var e=this,a=e.$createElement,i=e._self._c||a;return i("div",{staticClass:"uploadVideo"},[i("div",{staticClass:"header"},[i("span",{staticClass:"back",on:{click:e.back}},[i("img",{staticClass:"releaseIcon",attrs:{src:t("0YUB")}})]),e._v(" "),i("span",{staticClass:"usersTitle"}),e._v(" "),i("span",{staticClass:"back"}),e._v(" "),i("span",{staticClass:"upload",on:{click:e.release}},[e._v("发布")])]),e._v(" "),i("div",{staticClass:"content"},[i("form",{staticClass:"videoForm"},[i("div",{staticClass:"details"},[i("label",{staticClass:"detail"},[e._v("标题")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.videoTitle,expression:"videoTitle"}],staticClass:"videoTitle",attrs:{type:"text",placeholder:"为您的视频添加一个醒目的标题吧"},domProps:{value:e.videoTitle},on:{input:function(a){a.target.composing||(e.videoTitle=a.target.value)}}})]),e._v(" "),i("div",{staticClass:"details"},[i("label",{staticClass:"detail"},[e._v("内容")]),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.videoContent,expression:"videoContent"}],staticClass:"videoContent",attrs:{placeholder:"添加视频内容，以便大家深入了解"},domProps:{value:e.videoContent},on:{input:function(a){a.target.composing||(e.videoContent=a.target.value)}}})]),e._v(" "),i("div",{staticClass:"details"},[i("label",{staticClass:"detail"},[e._v("视频")]),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.hasCover,expression:"hasCover"}],staticClass:"videoImg"},[i("img",{attrs:{src:e.videoCover}})]),e._v(" "),i("label",{directives:[{name:"show",rawName:"v-show",value:!e.hasCover,expression:"!hasCover"}],staticClass:"getVideo",attrs:{for:"file"},on:{click:e.selectVideo}}),e._v(" "),i("input",{ref:"myVideo",staticStyle:{display:"none"},attrs:{type:"file",name:"file",accept:"video/mp4"},on:{change:e.getCover}})]),e._v(" "),i("div",{staticClass:"details"},[i("label",{staticClass:"detail"},[e._v("付费")]),e._v(" "),i("span",{staticClass:"paid"},[i("span",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.paid,expression:"paid"}],staticClass:"paidRadio",attrs:{type:"radio",name:"paidRadio",value:"1"},domProps:{checked:e._q(e.paid,"1")},on:{change:function(a){e.paid="1"}}}),e._v(" "),i("label",[e._v("是")])]),e._v(" "),i("span",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.paid,expression:"paid"}],staticClass:"paidRadio",attrs:{type:"radio",name:"paidRadio",value:"0"},domProps:{checked:e._q(e.paid,"0")},on:{change:function(a){e.paid="0"}}}),e._v(" "),i("label",[e._v("否")])])])]),e._v(" "),"1"===e.paid?i("div",{staticClass:"details"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.videoPrice,expression:"videoPrice"}],staticClass:"henghazhi",attrs:{type:"number",step:"0.01",min:"0.01"},domProps:{value:e.videoPrice},on:{input:function(a){a.target.composing||(e.videoPrice=a.target.value)}}}),e._v(" "),i("label",{staticClass:"hengha"},[e._v("元")]),e._v(" "),i("span",{staticClass:"notice"},[e._v("请填写收费金额")])]):e._e()])])])},staticRenderFns:[]};var d=t("VU/8")(o,n,!1,function(e){t("ormu")},"data-v-a390b8c8",null);a.default=d.exports},ormu:function(e,a){}});
//# sourceMappingURL=33.6ad40fc7323f470b7270.js.map